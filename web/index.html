<html>
	<head>
                <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
		<script src="bower_components/platform/platform.js"></script>
		
		<link rel="import" href="bower_components/core-toolbar/core-toolbar.html">
		<link rel="import" href="bower_components/core-ajax/core-ajax.html">
		<link rel="import" href="bower_components/core-menu/core-menu.html">
		<link rel="import" href="bower_components/core-item/core-item.html">
		<link rel="import" href="bower_components/core-header-panel/core-header-panel.html">
		<link rel="import" href="bower_components/core-drawer-panel/core-drawer-panel.html">
		<link rel="import" href="bower_components/core-icons/core-icons.html">
		<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
                <link rel="import" href="bower_components/paper-toast/paper-toast.html">
		
		<style shim-shadowdom>
			core-header-panel {
				background: white;
			}

			core-toolbar {
				background-color: #03A9F4;
			}
			
			#navheader {
				background-color: #56BA89;
			}
			
			/* Si nasconde il bottone del menu sugli schermi non "stretti" */
			core-drawer-panel:not([narrow]) #navicon {
				display: none;
			}
		</style>
		
		<style>
			body {
				font-family: sans-serif;
			}
			.content {
				padding: 20px;
			}
		</style>

	</head>
	
	<body>
        <paper-toast id="msgErrore" role="alert" text="Errore: pagina non disponibile."></paper-toast>
		<core-ajax id='ajaxTsw' url='get-exam-info' params='{}' handleAs='json'></core-ajax>
		<core-ajax id='ajaxIs' url='get-exam-info' params='{}' handleAs='json'></core-ajax>
		<core-drawer-panel id="drawerPanel">
			<core-header-panel drawer>
					<core-toolbar>
					<span>Menu</span>
				</core-toolbar>
				<core-menu>
					<core-item id='tsw' label="TSW"></core-item>
					<core-item id='is' label="Ingegneria del software"></core-item>
				</core-menu>
			</core-header-panel>

			<core-header-panel main>
				<core-toolbar id="mainheader">
					<paper-icon-button id="navicon" icon="menu"></paper-icon-button>
					<span flex>Title</span>
				</core-toolbar>
				<div id='mainContentHandler' class="content">
					Cliccare su una voce del menu a sinistra per visualizzarne il contenuto
                                        <template bind="{{}}">
                                            <div><h2>Crediti</h2><p>{{cfu}}</p></div>
                                            <div><h2>Obiettivi</h2><p>{{goal}}</p></div>
                                            <div><h2>Libro</h2><p>{{book}}</p></div>
                                        </template>
				</div>
			</core-header-panel>
		</core-drawer-panel>
		
		<script>
			document.addEventListener('polymer-ready', function() {
				var navicon = document.getElementById('navicon');
				var drawerPanel = document.getElementById('drawerPanel');
				navicon.addEventListener('click', function() {
					drawerPanel.togglePanel();
				});

				var tsw = document.getElementById("tsw");
				var is = document.getElementById("is")

				tsw.addEventListener('click', function() {
					document.getElementById('ajaxTsw').go();
                                        document.getElementById('drawerPanel').togglePanel();
				});
				is.addEventListener('click', function() {
					document.getElementById('msgErrore').show();
                                        document.querySelector("template").model = "{}";
                                        document.getElementById('drawerPanel').togglePanel();
				});
				
				document.querySelector("#ajaxTsw").addEventListener('core-response', function(e) {
					document.querySelector("template").model = e.detail.response;
				});

			});
		</script>
	</body>
</html>
